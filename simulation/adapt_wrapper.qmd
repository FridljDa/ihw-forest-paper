---
title: "adapt_wrapper"
format: html
editor: visual
---

## Quarto

```{r}
devtools::load_all(here::here("IHWForestPaper/adaptMT"))
```

```{r}
adapt_xgboost_wrapper <- function(Ps, 
                                  Xs, 
                                  alpha = 0.1) {
  
  res <- adapt_xgboost(as.matrix(Xs), 
                       Ps, 
                       alphas = alpha, 
                       nfits = 5)
  
  
  rejection_position <- res[["rejs"]]
  rejections <- rep(0, length(Ps))
  rejections[rejection_position] <- 1
  rejections
}


```

```{r}
 Xs <- runif(20000, min=0, max=2.5) # covariate
 Hs <- rbinom(20000,1,0.1) # hypothesis true or false
 Zs <- rnorm(20000, Xs*Hs) # Z-score
 Ps <- 1-pnorm(Zs) # pvalue
 adapt_xgboost_wrapper(Ps, Xs)
```
